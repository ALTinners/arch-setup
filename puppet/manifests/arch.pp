node default {

  package { [
  'alsa-utils'
, 'autoconf'
, 'automake'
, 'aws-cli'
, 'base'
, 'bash-completion'
, 'beep'
, 'bison'
, 'boost'
, 'calc'
, 'chromium'
, 'clonezilla'
, 'cmake'
, 'code'
, 'copyq'
, 'cups'
, 'cups-pdf'
, 'debootstrap'
, 'dhclient'
, 'dmenu'
, 'dnsmasq'
, 'docker'
, 'efibootmgr'
, 'fakeroot'
, 'fatresize'
, 'feh'
, 'firefox'
, 'flatpak'
, 'flex'
, 'foomatic-db-gutenprint-ppds'
, 'fping'
, 'gcc'
, 'gdb'
, 'gimp'
, 'git'
, 'github-cli'
, 'grub'
, 'gsfonts'
, 'gtest'
, 'gutenprint'
, 'hex'
, 'htop'
, 'i3-gaps'
, 'i3lock'
, 'i3status'
, 'iperf'
, 'iperf3'
, 'ipset'
, 'ipython'
, 'iw'
, 'iwd'
, 'jq'
, 'kcachegrind'
, 'keepass'
, 'ldns'
, 'less'
, 'libpam-google-authenticator'
, 'libreoffice-fresh'
, 'linux'
, 'linux-firmware'
, 'm4'
, 'maim'
, 'make'
, 'man-db'
, 'minicom'
, 'nano'
, 'nginx'
, 'nginx-mod-ndk'
, 'nginx-mod-set-misc'
, 'nmap'
, 'nodejs'
, 'noto-fonts-emoji'
, 'npm'
, 'nss-mdns'
, 'ntfs-3g'
, 'openssh'
, 'os-prober'
, 'p7zip'
, 'patch'
, 'picom'
, 'pkgconf'
, 'poco'
, 'postman-bin'
, 'pulseaudio'
, 'puppet'
, 'python'
, 'python-pip'
, 'python-pipenv'
, 'python-pylint'
, 'python-virtualenv'
, 'qrencode'
, 'rsync'
, 'screen'
, 'scrot'
, 'speedtest-cli'
, 'spotify'
, 'sshfs'
, 'sshpass'
, 'sudo'
, 'sysprof'
, 'termite'
, 'tk'
, 'traceroute'
, 'ubuntu-keyring'
, 'unzip'
, 'usbutils'
, 'vi'
, 'vlc'
, 'wine'
, 'wine-mono'
, 'wireshark-cli'
, 'xclip'
, 'xorg-server'
, 'xorg-xbacklight'
, 'xorg-xclipboard'
, 'xorg-xev'
, 'xorg-xhost'
, 'xorg-xinit'
, 'xorg-xinput'
, 'xorg-xkill'
, 'xorg-xrandr'
, 'xorg-xwininfo'
, 'zerotier-one'
, 'zip'
, 'zvbi'
  ]:
    ensure => present
  }

  $password = lookup('andrew_password', String)

  if !$password {
    fail('Password was not defined or not a string')
  }
  $_password = pw_hash($password, 'SHA-512', 'sines8uln33o')

  user { 'andrew':
    ensure     => present,
    managehome => true,
    password   => $_password,
    groups     => [
      'systemd-journal',
      'sudo',
      'uucp'
    ],
  }
}


